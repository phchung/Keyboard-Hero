{"version":3,"sources":["webpack/bootstrap 98679febc806133dc10b","./rhythm.js","./game.js","./note.js","./key.js","./score.js","./gameView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;;;;;;;ACfA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,eAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AC9GA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AChBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,IAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;;;;;;ACzEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN,qDAAoD,uDAAuD;AAC3G;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 98679febc806133dc10b\n **/","var Game = require('./game.js')\nvar GameView = require('./gameView')\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\nvar canvasEl = document.getElementById(\"canvas\")\ncanvasEl.width = Game.DIM_X;\ncanvasEl.height = Game.DIM_Y;\nvar ctx = canvasEl.getContext(\"2d\");\nvar game = new Game();\n// var music = document.getElementById('music');\n// music.addEventListener('canplaythrough', music.play(), false);\nnew GameView(game,ctx).startScreen();\n})\n\n\nwindow.GameView = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./rhythm.js\n ** module id = 0\n ** module chunks = 0\n **/","var Note = require('./note');\nvar Key = require('./key');\nvar Score = require('./score')\n\nfunction Game(){\n  this.keys = [];\n  this.notes = [];\n  this.score = 0;\n  this.song = new Score(this)\n  this.setUp();\n  // this.addNotes();\n  document.addEventListener(\"keydown\", this.keyDownTextField.bind(this), false);\n}\n\nGame.DIM_X = 550;\nGame.DIM_Y = 800;\n// Game.NOTELANE = [200,350,500,650];\nGame.NOTELANE = [100,215,330,445];\nGame.KEY = [100,215,330,445];\nGame.MOVES = [\"q\",\"w\",\"e\",\"r\"];\nGame.KEYCODE = [81,87,69,82]\n// Game.COMBO = { \"q\": 81, \"w\": 87, \"e\": 69, \"r\": 82 }\nGame.COMBO = {81:\"q\",87:\"w\",69:\"e\",82:\"r\"}\n\nGame.prototype.draw = function(ctx){\n  ctx.clearRect(0,0,Game.DIM_X,Game.DIM_Y)\n  // ctx.fillStyle = \"#F8F8FF\";\n  // ctx.fillRect(0,0,Game.DIM_X,Game.DIM_Y)\n  ctx.drawImage(bg,0,0,Game.DIM_X,Game.DIM_Y)\n  // ctx2.fillStyle = \"#F8F8FF\";\n  // ctx2.fillRect(0,0,Game.DIM_X,Game.DIM_Y)\n  var that = this;\n  ctx.font = \"30px Lato\"\n  ctx.fillStyle = '#ffffb3';\n  ctx.fillText(\"Score: \" + this.score, 10, 30);\n  this.keys.forEach(function(key){\n    key.draw(ctx)\n    key.pos[1] = Game.DIM_Y - 100;\n  })\n  this.notes.forEach(function(notes){\n    notes.draw(ctx)\n  })\n}\n\nGame.prototype.move = function(){\n  this.notes.forEach(function(notes){\n    notes.move()\n  })\n}\nGame.prototype.setUp = function(ctx){\n  Game.KEY.forEach(function(pos,idx){\n    this.keys.push(new Key(pos,Game.MOVES[idx],idx))\n  }.bind(this))\n}\nGame.prototype.addNotes = function(songTime){\n  this.song.addNotes(songTime);\n}\n\nGame.prototype.notesOutOfBound = function(){\n  var that = this;\n  this.notes.forEach(function(note,index){\n    if(note.pos[1]>Game.DIM_Y){\n      that.notes.splice(index,1)\n    }\n  })\n}\nGame.prototype.checkCollison = function(keyCode){\n  var buttonPressed = Game.COMBO[keyCode]\n  var key_index = Game.MOVES.indexOf(buttonPressed)\n  this.hit(key_index)\n}\n\nGame.prototype.hit = function(key_index){\n  var that = this;\n  var initial_height = this.keys[0].pos[1];\n  var final_height = initial_height + this.keys[0].dim_y;\n  this.notes.forEach(function(note,index){\n    var nintypercent = note.diameter * .90\n    var tenpercent = note.diameter * .30\n    var note_index = Game.NOTELANE.indexOf(note.pos[0])\n      if(key_index === note_index){\n        if(note.pos[1] > 700 + tenpercent\n              || note.pos[1] > final_height - tenpercent){\n                that.score+=100\n                that.notes.splice(index,1)\n          } else {\n            console.log('miss')\n        }\n      }\n    })\n  }\n\nGame.prototype.keyDownTextField = function(e){\n  var keyCode = e.keyCode;\n  if(Game.KEYCODE.includes(keyCode)){\n    var whichkey = Game.COMBO[keyCode]\n    this.keys.forEach(function(key){\n      if(key.move === whichkey){\n        key.pos[1] = key.pos[1] + 4\n      }\n    })\n    this.checkCollison(keyCode)\n  }\n}\n\nGame.prototype.step = function(){\n  this.move();\n  this.notesOutOfBound();\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game.js\n ** module id = 1\n ** module chunks = 0\n **/","function Note(pos,idx){\n  this.pos = [pos,0]\n  this.diameter = 40;\n  this.idx = idx;\n}\n\nNote.ARROW = [\"left\",\"down\",\"right\",\"up\"]\n\nNote.prototype.draw = function(ctx){\n  var note = document.getElementById(Note.ARROW[this.idx])\n    ctx.drawImage(note,65,0,63,64,this.pos[0],this.pos[1],95,95);\n}\n// note one = ctx.drawImage(note,0,0,63,64,this.pos[0],this.pos[1],95,95);\nNote.prototype.move = function(){\n  this.pos[1] = this.pos[1] + 3;\n}\n\nmodule.exports = Note\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./note.js\n ** module id = 2\n ** module chunks = 0\n **/","function Key(pos,move,idx){\n  this.pos = [pos,600];\n  this.move = move;\n  this.dim_y = 10;\n  this.idx = idx\n  this.pressed = false;\n}\n\nKey.CANVAS_POS = [0,215,445,660];\nvar progress = 0;\n\nKey.prototype.draw = function(ctx){\n  var arrow = document.getElementById(\"arrow\");\n  ctx.drawImage(arrow,Key.CANVAS_POS[this.idx],0,210,210,this.pos[0],this.pos[1],100,100);\n}\n\nmodule.exports = Key;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./key.js\n ** module id = 3\n ** module chunks = 0\n **/","var Note = require('./note');\nvar Game = require('./game');\n\nfunction Score(game){\n  this.bar = 0;\n  this.game = game;\n}\n\nScore.NOTELANE = [100,215,330,445];\n\nvar array = [5.8, 7.1, 8.4, 9.8, 11.1, 12.5, 13.9, 15.2, 16.6, 17.9, 19.3, 20.6, 21.4,\n  22.1, 22.8, 23.5, 24.1, 24.8, 25.6, 26.2, 26.9, 27.6, 28.3, 29.6, 30.3,\n  31, 31.6, 32.3, 33.1, 33.8, 34.4, 35, 35.8, 36.5, 37.1, 37.1, 37.8, 37.8,\n  38.5, 38.5, 39.2, 39.2]\n\nfunction sort(array){\n  var array2 = []\n  array.forEach(function(point){\n    array2.push(Math.round(point*10)/10)\n  })\n  array2.map(function(each){\n    return [each,1]\n  })\n  return array2\n}\n\n// [time,lane]\nScore.SONG = [\n  [5.8,1],\n  [7.1,1],\n  [8.4,1],\n  [9.8,1],\n  [11.1,1],\n  [12.5,1],\n  [13.9,1],\n  [15.2,1],\n  [16.6,1],\n  [17.9,1],\n  [19.3,1],\n  [20.6,1],\n  [21.4,1],\n  [21.1,1],\n  [22.8,1],\n  [23.5,1]\n]\n\n// Score.prototype.addNotes = function(){\n//   var collection = []\n//   for (n=0;n<4;n++){\n//     var noteIndex = Score.SONG[this.bar].indexOf(Score.SONG[this.bar][n])\n//     debugger;\n//     var lane = Score.NOTELANE[n]\n//     if (Score.SONG[this.bar][n] === '1')\n//     collection.push(new Note(lane,n))\n//   }\n//   this.game.notes = this.game.notes.concat(collection)\n//     if(this.bar === 3){\n//       this.bar = 0\n//     } else {\n//       this.bar++\n//     }\n// }\n\nScore.prototype.addNotes = function(songTime){\n  var collection = []\n  Score.SONG.forEach(function(pair){\n    if(pair[0] === songTime){\n      collection.push(new Note(Score.NOTELANE[pair[1]],pair[1]))\n    }\n  })\n  this.game.notes = this.game.notes.concat(collection)\n}\n\nmodule.exports = Score;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./score.js\n ** module id = 4\n ** module chunks = 0\n **/","var Game = require('./game')\n\nfunction GameView(game,ctx){\n  this.game = game;\n  this.ctx = ctx;\n  this.keys = this.game.keys;\n  this.page = 1;\n  this.startTime = 0;\n  this.setUpListeners()\n}\nvar array = []\n\n\nGameView.MOVES = [\"q\",\"w\",\"e\",\"r\"];\n// window.array = array;\n\nGameView.prototype.run = function(){\n  var that = this;\n  // window.setInterval(function(){\n  //   songTime = new Date().getTime()/1000 - that.startTime\n  //   songTime = Math.round(songTime*2)/2\n  //   that.game.addNotes(songTime)\n  // },500)\n\n  // document.addEventListener(\"keydown\",function(){array.push(new Date().getTime()/1000 - that.startTime)})\n  window.setInterval(function(){\n    songTime = new Date().getTime()/1000 - that.startTime\n    songTime = Math.round(songTime*10)/10\n\n    that.game.addNotes(songTime)\n  },100)\n  requestAnimationFrame(this.animate.bind(this));\n}\n\nGameView.prototype.animate = function(time){\n  this.game.draw(this.ctx);\n  this.game.step()\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.startScreen = function(){\n  this.ctx.clearRect(0, 0, 800, 900);\n  this.ctx.font = \"64px Handlee\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(\"NOT DDR\", 110, 300);\n}\n\nGameView.prototype.setUpListeners = function(){\n  this.startButton = document.getElementById(\"start\")\n  this.startButton.addEventListener('click',this.changePage.bind(this,2))\n}\n\nGameView.prototype.changePage = function(page){\n  this.page = page\n  var that = this;\n  if(this.page === 2){\n      this.run();\n        setTimeout(function(){\n        var music = document.getElementById('music')\n        that.songStarted();\n        console.log('SONG STARTED')\n        music.addEventListener('canplaythrough', music.play(), false)\n      },5000)\n      this.startButton.className = \"hidden\";\n  }\n}\n\nGameView.prototype.songStarted = function(){\n  this.startTime = new Date().getTime()/1000\n}\n\nmodule.exports = GameView\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./gameView.js\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}